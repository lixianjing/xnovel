却说孔明知祁山兵已回，遂令杨仪、马忠入帐，授以密计，令先引一万弓弩手，去剑阁木门道，两下埋伏；若魏兵追到，听吾炮响，急滚下木石，先截其去路，两头一齐射之。二人引兵去了。又唤魏延、关兴引兵断后，城上四面遍插旌旗，城内乱堆柴草，虚放烟火。大兵尽望木门道而去。<br/><br/>魏营巡哨军来报司马懿曰：“蜀兵大队已退，但不知城中还有多少兵。”懿自往视之，见城上插旗，城中烟起，笑曰：“此乃空城也。”令人探之，果是空城，懿大喜曰：“孔明已退，谁敢追之？”先锋张郃曰：“吾愿往。”懿阻曰：“公性急躁，不可去。”郃曰：“都督出关之时，命吾为先锋；今日正是立功之际，却不用吾，何也？”懿曰：“蜀兵退去，险阻处必有埋伏，须十分仔细，方可追之。”郃曰：“吾已知得，不必挂虑。”懿曰：“公自欲去，莫要追悔。”郃曰：“大丈夫舍身报国，虽万死无恨。”懿曰：“公既坚执要去，可引五千兵先行；却教魏平引二万马步兵后行，以防埋伏。吾却引三千兵随后策应。”<br/><br/>张郃领命，引兵火速望前追赶。行到三十余里，忽然背后一声喊起，树林内闪出一彪军，为首大将，横刀勒马大叫曰：“贼将引兵那里去！”郃回头视之，乃魏延也。郃大怒，回马交锋。不十合，延诈败而走。郃又追赶三十余里，勒马回顾，全无伏兵，又策马前追。方转过山坡，忽喊声大起，一彪军闪出，为首大将，乃关兴也，横刀勒马大叫曰：“张郃休赶！有吾在此！”郃就拍马交锋。不十合，兴拨马便走。郃随后追之。赶到一密林内，郃心疑，令人四下哨探，并无伏兵；于是放心又赶。不想魏延却抄在前面；郃又与战十余合，延又败走。郃奋怒追来，又被关兴抄在前面，截住去路。郃大怒，拍马交锋，战有十合，蜀兵尽弃衣甲什物等件，塞满道路，魏军皆下马争取。延、兴二将，轮流交战，张郃奋勇追赶。看看天晚，赶到木门道口，魏延拨回马，高声大骂曰：“张郃逆贼！吾不与汝相拒，汝只顾赶来，吾今与汝决一死战！”郃十分忿怒，挺枪骤马，直取魏延。延挥刀来迎。战不十合，延大败，尽弃衣甲、头盔，匹马引败兵望木门道中而走。张郃杀得性起，又见魏延大败而逃，乃骤马赶来。此时天色昏黑，一声炮响，山上火光冲天，大石乱柴滚将下来，阻截去路。郃大惊曰：“我中计矣！”急回马时，背后已被木石塞满了归路，中间只有一段空地，两边皆是峭壁，郃进退无路。忽一声梆子响，两下万弩齐发，将张郃并百余个部将，皆射死于木门道中。后人有诗曰：“伏弩齐飞万点星，木门道上射雄兵。至今剑阁行人过，犹说军师旧日名。”<br/><br/>