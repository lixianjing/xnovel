魏兵探知蜀兵要来劫粮，慌忙报与孙礼。礼令人飞报曹真。真遣人去头营分付张虎、乐綝：“看今夜山西火起，蜀兵必来救应。可以出军，如此如此。”二将受计，令人登楼专看号火。却说孙礼把军伏于山西，只待蜀兵到。是夜二更，马岱引三千兵来，人皆衔枚，马尽勒口，径到山西。见许多车仗，重重叠叠，攒绕成营，车仗虚插旌旗。正值西南风起，岱令军士径去营南放火，车仗尽着，火光冲天。孙礼只道蜀兵到魏寨内放号火，急引兵一齐掩至。背后鼓角喧天，两路兵杀来：乃是马忠、张嶷，把魏军围在垓心。孙礼大惊。又听的魏军中喊声起，一彪军从火光边杀来，乃是马岱。内外夹攻，魏兵大败。火紧风急，人马乱窜，死者无数。孙礼引中伤军，突烟冒火而走。却说张虎在营中，望见火光，大开寨门，与乐綝尽引人马，杀奔蜀寨来，寨中却不见一人。急收军回时，吴班、吴懿两路兵杀出，断其归路。张、乐二将急冲出重围，奔回本寨，只见土城之上，箭如飞蝗，原来却被关兴、张苞袭了营寨。魏兵大败，皆投曹真寨来。方欲入寨，只见一彪败军飞奔而来，乃是孙礼；遂同入寨见真，各言中计之事。真听知，谨守大寨，更不出战。蜀兵得胜，回见孔明。孔明令人密授计与魏延，一面教拔寨齐起。杨仪曰：“今已大胜，挫尽魏兵锐气，何故反欲收军？”孔明曰：“吾兵无粮，利在急战。今彼坚守不出，吾受其病矣。彼今虽暂时兵败，中原必有添益；若以轻骑袭吾粮道，那时要归不能。今乘魏兵新败，不敢正视蜀兵，便可出其不意，乘机退去。所忧者但魏延一军，在陈仓道口拒住王双，急不能脱身；吾已令人授以密计，教斩王双，使魏人不敢来追。只今后队先行。”当夜，孔明只留金鼓守在寨中打更。一夜兵已尽退，只落空营。却说曹真正在寨中忧闷，忽报左将军张郃领军到。郃下马入帐，谓真曰：“某奉圣旨，特来听调。”真曰：“曾别仲达否？”郃曰：“仲达分付云：吾军胜，蜀兵必不便去；若吾军败，蜀兵必即去矣。今吾军失利之后，都督曾往哨探蜀兵消息否？”真曰：“未也。”于是即令人往探之，果是虚营，只插着数十面旌旗，兵已去了二日也。曹真懊悔无及。<br/><br/>且说魏延受了密计，当夜二更拔寨，急回汉中。早有细作报知王双。双大驱军马，并力追赶。追到二十余里，看看赶上，见魏延旗号在前，双大叫曰：“魏延休走！”蜀兵更不回头。双拍马赶来。背后魏兵叫曰：“城外寨中火起，恐中敌人奸计。”双急勒马回时，只见一片火光冲天，慌令退军。行到山坡左侧，忽一骑马从林中骤出，大喝曰：“魏延在此！”王双大惊，措手不及，被延一刀砍于马下。魏兵疑有埋伏，四散逃走。延手下止有三十骑人马，望汉中缓缓而行。后人有诗赞曰：“孔明妙算胜孙庞，耿若长星照一方。进退行兵神莫测，陈仓道口斩王双。”原来魏延受了孔明密计：先教存下三十骑，伏于王双营边；只待王双起兵赶时，却去他营中放火；待他回寨，出其不意，突出斩之。魏延斩了王双，引兵回到汉中见孔明，交割了人马。孔明设宴大会，不在话下。<br/><br/>